<% provide(:title, '新規投稿') %>
<div class="container">
  <div class="py-5 text-center">
    <h2>新規投稿</h2>
  </div>
  <div class="row g-3">
    <div class="col-10 offset-1">
      <%= form_with(model:@post, local: true) do |f| %>
        <%= render 'shared/error_messages', object: f.object %>
        <div class="row g-3">

          <div class="col-12">
            <%= f.label :name, '名称', class: 'form-label' %>
            <%= f.text_field :name, class: "form-control" %>
          </div>

          <div class="col-12">
            <%= f.label :images, '画像アップロード', class: 'form-label' %>
            <%= f.file_field :images, accept: "image/jpeg, image/gif, image/png", class: "form-control" %>
          </div>

          <%
=begin%>
 <div class="col-md-6">
            <label for="zip" class="form-label">郵便番号</label>
            <input type="text" class="form-control" id="zip" placeholder="" required="">
          </div>

          <div class="col-md-6">
            <label for="state" class="form-label">都道府県</label>
            <select class="form-select" id="state" required="">
              <option value="">選択してください</option>
              <option>東京都</option>
            </select>
          </div> 
<%
=end%>

          <div class="col-12">
            <%= f.label :address, '住所', class: "form-label" %>
            <%= f.text_field :address, class: "form-control", placeholder: "東京都千代田区千代田1-1" %>
          </div>

          <div class="col-12">
            <%= f.label :fee, '料金', class: 'form-label' %>
            <%= f.text_field :fee, class: "form-control" %>
          </div>

          <div class="col-12">
            <%= f.label :available_time, '時間帯', class: 'form-label' %>
            <%= f.text_field :available_time, class: "form-control" %>
          </div>

          <div class="col-12">
            <%= f.label :holiday, '定休日', class: 'form-label' %>
            <%= f.text_field :holiday, class: "form-control" %>
          </div>

          <div class="col-12">
            <%= f.label :phone_number, '電話番号', class: 'form-label' %>
            <%= f.text_field :phone_number, class: "form-control" %>
          </div>

          <div class="col-12">
            <%= f.label :url, 'URL', class: 'form-label' %>
            <%= f.text_field :url, class: "form-control" %>
          </div>

          <div class="col-12">
            <%= f.label :content, '備考', class: 'form-label' %>
            <%= f.text_area :content, class: "form-control" %>
          </div>

        </div>

        <%= f.submit '投稿する', class: "w-100 btn btn-primary btn-lg mt-5" %>

      <% end %>
    </div>
    </div>
</div>

<script type="text/javascript">
  $("#post_images").bind("change", function() {
    var size_in_megabytes = this.files[0].size/1024/1024;
    if (size_in_megabytes > 5) {
      alert('画像のサイズが5MBを超えています。5MB未満の画像を選択して下さい。');
      $("#post_images").val("");
    }
  });
</script>
